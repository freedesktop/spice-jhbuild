<?xml version="1.0" standalone="no"?><!--*- mode: nxml -*-->
<!DOCTYPE moduleset SYSTEM "moduleset.dtd">
<?xml-stylesheet type="text/xsl" href="moduleset.xsl"?>
<moduleset>
  <repository type="git" name="git.freedesktop.org"
      href="git://anongit.freedesktop.org/"/>

  <repository type="git" name="spice"
      href="git://anongit.freedesktop.org/git/spice"/>

  <repository type="git" name="qemu"
      href="git://git.qemu.org"/>

  <repository type="git" name="git.gitorious.org"
      href="git://gitorious.org/"/>

  <repository type="git" name="libvirt.org"
      href="git://libvirt.org/"/>

  <repository type="git" name="git.fedorahosted.org"
      href="git://git.fedorahosted.org/git/"/>

  <repository type="tarball" name="sourceforge"
      href="http://downloads.sourceforge.net/project/"/>

  <repository type="git" name="git.gnome.org"
      href="git://git.gnome.org/"/>

  <tarball id="celt" version="0.5.1.3">
    <source href="http://downloads.us.xiph.org/releases/celt/celt-0.5.1.3.tar.gz"
            hash="sha256:fc2e5b68382eb436a38c3104684a6c494df9bde133c139fbba3ddb5d7eaa6a2e"
            md5sum="67e7b5e45db57a6f1f0a6962f5ecb190" size="440772"/>
    <dependencies>
    </dependencies>
  </tarball>

  <autotools id="spice-server" autogenargs="--enable-werror --enable-smartcard --with-sasl --disable-client" >
    <branch repo="spice" module="spice"/>
    <dependencies>
      <dep package="spice-protocol"/>
      <dep package="celt"/>
      <dep package="libcacard"/>
      <dep package="pyparsing"/>
    </dependencies>
  </autotools>

  <autotools id="spice-protocol">
    <branch repo="spice" module="spice-protocol"/>
    <dependencies>
    </dependencies>
  </autotools>

  <!-- qemu isn't a real autotools user, but it provides a configure script
       which is really similar to the one in autotools build systems.
       However clean git checkouts already contain a Makefile, so we can't
       rely on this file to know whether autogen.sh needs to be run or not,
       so we use config.log instead (which isn't present in a clean git
       checkout). The configure script requires an "=" when using 'prefix',
       and doesn't accept libdir nor other unknow arguments so we force
       a specific template to be used -->
  <autotools id="qemu" makefile="config.log" autogen-template="%(srcdir)s/configure --prefix=%(prefix)s --enable-spice --target-list=x86_64-softmmu --enable-smartcard-nss --enable-smartcard" >
    <branch repo="qemu" module="qemu"/>
    <dependencies>
      <dep package="libcacard"/>
      <dep package="spice-server"/>
      <dep package="vd-agent"/>
    </dependencies>
  </autotools>

  <autotools id="slirp">
    <branch repo="spice" module="slirp"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="libcacard">
    <branch repo="git.freedesktop.org" module="~alon/libcacard"/>
    <dependencies>
    </dependencies>
  </autotools>

  <distutils id="pyparsing">
    <branch repo="sourceforge"
        module="pyparsing/pyparsing/pyparsing-1.5.5/pyparsing-1.5.5.tar.gz"
        hash="sha1:68f18a8f98c9d0e613e08ab45c2b8263daa4a53b"
        version="1.5.5" size="1412611"/>
  </distutils>

  <autotools id="spice-gtk">
    <branch repo="git.gitorious.org" module="spice-gtk/spice-gtk.git"/>
    <dependencies>
      <dep package="spice-protocol"/>
      <dep package="celt"/>
      <dep package="pyparsing"/>
    </dependencies>
  </autotools>

  <autotools id="vd-agent">
    <branch repo="spice" module="linux/vd_agent"/>
    <dependencies>
      <dep package="spice-protocol"/>
    </dependencies>
  </autotools>

  <autotools id="qxl">
    <branch repo="spice" module="xorg/driver/xf86-video-qxl"/>
    <dependencies>
      <dep package="spice-protocol"/>
    </dependencies>
  </autotools>

  <autotools id="xspice">
    <branch repo="git.freedesktop.org" module="~alon/xspice"/>
    <dependencies>
      <dep package="spice-protocol"/>
      <dep package="spice-server"/>
    </dependencies>
  </autotools>

  <autotools id="win32-vd-agent">
    <branch repo="spice" module="win32/vd_agent"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="win32-qxl">
    <branch repo="spice" module="win32/qxl"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="libvirt">
    <branch repo="libvirt.org" module="libvirt.git"/>
    <dependencies>
    </dependencies>
  </autotools>

  <!-- virt-manager comes with an autogen.sh script which tries to be
       too clever, it forces an out of tree build. jhbuild doesn't know
       how to handle this, so we directly use autoreconf/configure to
       workaround this (mis)behaviour of autogen.sh -->
  <autotools id="virt-manager" autogen-sh="autoreconf" autogenargs=" --with-default-graphics=spice">
    <branch repo="git.fedorahosted.org" module="virt-manager.git"/>
    <dependencies>
      <dep package="libvirt"/>
      <dep package="virtinst"/>
    </dependencies>
  </autotools>

  <distutils id="virtinst">
    <branch repo="git.fedorahosted.org" module="python-virtinst.git"/>
    <dependencies>
      <dep package="virt-viewer"/>
    </dependencies>
  </distutils>

  <autotools id="virt-viewer">
    <branch repo="git.fedorahosted.org" module="virt-viewer.git"/>
    <dependencies>
      <dep package="spice-gtk"/>
    </dependencies>
  </autotools>

  <autotools id="vinagre" autogenargs="--enable-spice">
    <branch repo="git.gnome.org" module="vinagre.git"/>
    <dependencies>
      <dep package="spice-gtk"/>
    </dependencies>
  </autotools>

</moduleset>
